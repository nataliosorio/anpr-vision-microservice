# =========================
#  App Config
# =========================
APP_NAME=anpr-microservice   # Nombre del microservicio (para logs, m√©tricas, etc.)
APP_ENV=development          # Entorno de ejecuci√≥n: development | staging | production
APP_PORT=8000                # Puerto donde corre la API FastAPI/Uvicorn

# =========================
#  Kafka Config
# =========================
KAFKA_BROKER=localhost:29092  
# Direcci√≥n del broker Kafka
KAFKA_TOPIC=vehicle_detected 
# T√≥pico donde se publican las detecciones de placas

# =========================
#  Database & Cache
# =========================
DB_URL=postgresql://user:password@localhost:5432/anpr  # Conexi√≥n a la base de datos Postgres
REDIS_URL=redis://localhost:6379/0                     # Conexi√≥n a Redis (DB 0)

# =========================
#  YOLO Model
# =========================
YOLO_VERSION=v5
MODEL_PATH=./models/best.pt   # Ruta al modelo YOLO entrenado para detecci√≥n de placas
CONF_THRESHOLD=0.7           # Confianza m√≠nima para aceptar una detecci√≥n (0-1)
IOU_THRESHOLD=0.50            # Umbral de IoU para supresi√≥n de no-m√°ximos (NMS)

# =========================
#  Runtime Options
# =========================
DEBUG_SHOW=true        # Si est√° en true, abre ventana con stream (solo en local con GUI)
LOOP_DELAY=0.0         # Segundos entre iteraciones del loop (0 = sin delay, √∫til en debug)

# =========================
#  Deduplicaci√≥n
# =========================
DEDUP_TTL=9.0                 # Tiempo m√≠nimo (segundos) para volver a publicar la misma placa
SIMILARITY_THRESHOLD=0.9      # Similitud m√≠nima (0-1) para considerar dos lecturas como iguales
PLATE_MIN_LENGTH=5   

# =========================
# üìñ OCR Config
# =========================
OCR_LANG=en                   # Idioma/base de entrenamiento del OCR (ej: en, es, en+es)
OCR_INTERVAL=5                # Ejecutar OCR cada N frames (1 = en todos los frames)
OCR_MIN_LENGTH=5               # Longitud m√≠nima del texto reconocido para ser v√°lido
OCR_MIN_CONFIDENCE=0.85        # Confianza m√≠nima del OCR para aceptar el texto detectado

# ========================
# CAMERA URL CONFIG
# ========================
CAMERA_URL=rtsp://172.30.6.41:8080/h264_ulaw.sdp¬†#SENA
#CAMERA_URL=rtsp://192.168.1.2:8080/h264_ulaw.sdp   # URL RTSP de la c√°mara de entrada HOUSE
CAMERA_NATIVE= false

# =========================
#  YOLOv5 Config
# =========================
YOLOV5_MODEL_PATH=./models/best.pt   # Ruta local al archivo .pt del modelo YOLOv5
YOLOV5_CONF=0.6                     # Umbral de confianza m√≠nimo para aceptar detecciones (0‚Äì1)
YOLOV5_IOU=0.45                      # Umbral IoU para NMS (elimina cajas solapadas)
YOLOV5_IMG_SIZE=640                  # Tama√±o de la imagen de entrada (debe ser m√∫ltiplo de 32)
YOLOV5_AGNOSTIC=false                # NMS agn√≥stico a clases (true = mezcla todas las clases)
YOLOV5_MULTI_LABEL=false             # Permitir m√∫ltiples etiquetas por caja (ej. multilabel datasets)
YOLOV5_MAX_DET=1000                  # M√°ximo n√∫mero de detecciones por imagen
YOLOV5_DEVICE=auto                   # Dispositivo: auto (detecta GPU/CPU), cpu, cuda:0, etc.


# (Opcional fallback a HF)
YOLOV5_HF_REPO=keremberke/yolov5n-license-plate
YOLOV5_HF_FILENAME=yolov5n-license-plate.pt

# =========================
#  ByteTrack Config
# =========================
BYTETRACK_THRESH=0.5         # Confianza m√≠nima (0-1) para que una detecci√≥n entre al tracker
BYTETRACK_MATCH_THRESH=0.8   # Umbral IoU para asociaci√≥n entre tracks y detecciones
BYTETRACK_BUFFER_SIZE=30     # N¬∫ de frames que un track puede sobrevivir sin actualizarse
BYTETRACK_FPS=30             # Tasa de cuadros estimada del stream (afecta l√≥gica interna)